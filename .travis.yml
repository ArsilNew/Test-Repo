language: node_js
node_js:
  - "12"
cache: yarn

env:
  global:
    - GIT_NAME="uikenshoo"
    - GIT_EMAIL="ui@kenshoo.com"

script:
  - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH; else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - yarn build

before_deploy:
  - if [ "$BRANCH" == "master" ]; then
      git checkout master;
    fi;


deploy:
  - provider: script
    script: if [ "$GH_TOKEN" != "false" ]; then npx auto shipit; fi;
    skip-cleanup: true
    on:
      all_branches: true